<style>
  body {
    font-size: 5rem;
    font-family: sans-serif;
    background-color: black;
    color: white;
  }

  input {
    all: unset;
    margin-left: 1rem;
    margin-bottom: 1rem;
    font-size: 5rem;
    padding: 0.3rem 1rem;
    outline: 0.15rem solid #0f0;
  }

  .container {
    display: grid;
    grid-template-columns: auto auto;
    grid-template-rows: auto auto;
    margin-bottom: 4rem;
    white-space: nowrap;
  }

  .result {
    animation: appear 1s ease-in-out;
  }

  @keyframes appear {
    from {
      opacity: 0;
    }

    to {
      opacity: 1;
    }
  }
</style>

<div class="container">
  <span>Tama√±o:</span>
  <input onkeydown="handleKeyDown(event)" oninput="handleInputSize(this)" />

  <span>Puesto:</span>
  <input
    autofocus
    onkeydown="handleKeyDown(event)"
    oninput="handleInputPosition(this)"
  />
</div>

<script>
  let total = parseInt(window.location.search.slice(1));
  let position = "";

  document.querySelector("input").value = total || "";

  const result = document.createElement("span");
  result.className = "result";

  function handleKeyDown(event) {
    if (event.key !== "Backspace" && Number.isNaN(parseInt(event.key))) {
      event.preventDefault();
    }
  }

  function handleInputSize(target) {
    total = parseInt(target.value);
    printPosition();
  }

  function handleInputPosition(target) {
    position = parseInt(target.value);
    printPosition();
  }

  function printPosition() {
    const threshold = total / 2;
    const ceil = Math.ceil(threshold);
    const adjust = position === threshold ? 2 : 1;

    let attack = position;
    if (position <= threshold) {
      attack = position * 2 - 1;
    } else if (position === ceil) {
      attack = position * 2 - 2;
    }

    if (!position || !total || total < 2 || position > total) {
      result.textContent = "";
    } else if (position === total) {
      result.textContent = `Ataca al ${attack - 1} y al ${attack}`;
    } else {
      result.textContent = `Ataca al ${attack} y al ${attack + 1}`;
    }

    if (!result.textContent && result.isConnected) {
      document.body.removeChild(result);
    }

    if (result.textContent && !result.isConnected) {
      document.body.appendChild(result);
    }
  }
</script>
